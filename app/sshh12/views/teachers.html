<script src="sshh12#lang"></script>

<style>
	.head {
		background-color: #F5F5F5;
	}
</style>
<div class="">

  <super-navbar>
    <super-navbar-title>
      Teachers
    </super-navbar-title>
  </super-navbar>
	<div id="main_lists">

		<div class="list">
  		<label class="item item-input">
    		<i class="icon super-search placeholder-icon"></i>
    		<input type="text" placeholder="Search" id="search_bar" onChange="loadTeachers();" onkeypress="loadTeachers();" onkeyup="loadTeachers();">
  		</label>

			<div id="content">
				<!-- Template
				<div class="item item-divider">A</div>
				<a class="item item-button-right">
    	  	<b><h3>Teachers, Name</h3></b>
					<button class="button icon super-email button-positive"></button>
    			<p>HTTP://website/here</p>
  			</a>-->
			</div>
	</div>

	</div>
</div>
<script defer>
function makeDivider(letter){
	return "<div class=\"item item-divider\">" + letter + "</div>";
}

function makeTeacher(name, website, email){
	website = website.replace("https://", "");
	website = website.replace("http://www.", "");
	website = website.replace("/a/cfisd.net/", "/../");
	return "<a class=\"item item-button-right\"><b><h3>" + name + "</h3></b><button onClick=\"supersonic.app.openURL('mailto:" + email + "')\" class=\"button icon super-email button-positive\"></button><p onClick=\"supersonic.app.openURL('" + website + "')\">" + website + "</p></a>";
}

function loadTeachers(){
	var json_page = localStorage.getItem("faculty_json");
	if(isUndefined(json_page) || json_page == null || json_page.length < 20){
		json_page = getFromSite('faculty');
		localStorage.setItem("faculty_json", json_page);
	}

	var json = JSON.parse(json_page);

	var search = reduceString(document.getElementById("search_bar").value);

	var html = "";

	var letters = ['A', 'B', 'C', 'D', 'E', 'F',
	 							 'G', 'H', 'I', 'J', 'K', 'L',
								 'M', 'N', 'O', 'P', 'Q', 'R',
								 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];

	for(var div_letter in letters){

		var groupOfTeachers = "";
		if(json[letters[div_letter]]){

			for(var i = 0; i < json[letters[div_letter]].length; i++){
				var teacher = makeTeacher(json[ letters[div_letter] ][i].name, json[ letters[div_letter] ][i].website, json[ letters[div_letter] ][i].email);
				if(reduceString(teacher).indexOf(search) >= 0 || search.length < 1){
					groupOfTeachers += teacher;
				}
			}

			if(groupOfTeachers.length > 0){
				groupOfTeachers = makeDivider(letters[div_letter]) + groupOfTeachers;
			}

			html += groupOfTeachers;

		}
	}

	document.getElementById("content").innerHTML = html;
}

loadTeachers();

supersonic.app.splashscreen.hide();
</script>
